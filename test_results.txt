============================= test session starts ==============================
platform linux -- Python 3.10.16, pytest-8.3.5, pluggy-1.5.0 -- /usr/local/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.10.16', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.36', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.5.0'}, 'Plugins': {'anyio': '4.9.0', 'xdist': '3.6.1', 'html': '4.1.1', 'cov': '6.0.0', 'metadata': '3.1.1'}}
rootdir: /app
plugins: anyio-4.9.0, xdist-3.6.1, html-4.1.1, cov-6.0.0, metadata-3.1.1
collecting ... collected 124 items / 15 errors

==================================== ERRORS ====================================
______ ERROR collecting tests/integration/test_admin_settings_effects.py _______
/usr/local/lib/python3.10/site-packages/_pytest/python.py:493: in importtestmodule
    mod = import_path(
/usr/local/lib/python3.10/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/usr/local/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
<frozen importlib._bootstrap>:1050: in _gcd_import
    ???
<frozen importlib._bootstrap>:1027: in _find_and_load
    ???
<frozen importlib._bootstrap>:1006: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:688: in _load_unlocked
    ???
/usr/local/lib/python3.10/site-packages/_pytest/assertion/rewrite.py:176: in exec_module
    source_stat, co = _rewrite_test(fn, self.config)
/usr/local/lib/python3.10/site-packages/_pytest/assertion/rewrite.py:356: in _rewrite_test
    tree = ast.parse(source, filename=strfn)
/usr/local/lib/python3.10/ast.py:50: in parse
    return compile(source, filename, mode, flags,
E     File "/app/tests/integration/test_admin_settings_effects.py", line 349
E       def test_key_rotation_notification_setting(admin_token, setup_default_settings):
E   IndentationError: expected an indented block after 'with' statement on line 341
_______ ERROR collecting tests/integration/test_api_device_operations.py _______
ImportError while importing test module '/app/tests/integration/test_api_device_operations.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_api_device_operations.py:14: in <module>
    from tests.utils.api_test_utils import (
E   ImportError: cannot import name 'delete_test_device' from 'tests.utils.api_test_utils' (/app/tests/utils/api_test_utils.py)
____ ERROR collecting tests/integration/test_backup_storage_integration.py _____
ImportError while importing test module '/app/tests/integration/test_backup_storage_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_backup_storage_integration.py:22: in <module>
    from netraven.core.storage import LocalFileStorage, S3Storage
E   ImportError: cannot import name 'LocalFileStorage' from 'netraven.core.storage' (/app/netraven/core/storage.py)
__________ ERROR collecting tests/integration/test_credential_api.py ___________
tests/integration/test_credential_api.py:13: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
___ ERROR collecting tests/integration/test_credential_store_integration.py ____
ImportError while importing test module '/app/tests/integration/test_credential_store_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_credential_store_integration.py:20: in <module>
    from netraven.core.device_connector import DeviceConnector
E   ModuleNotFoundError: No module named 'netraven.core.device_connector'
_______ ERROR collecting tests/integration/test_credential_with_keys.py ________
tests/integration/test_credential_with_keys.py:13: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
___________ ERROR collecting tests/integration/test_job_logs_api.py ____________
tests/integration/test_job_logs_api.py:8: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
_ ERROR collecting tests/integration/test_job_tracking_notification_integration.py _
ImportError while importing test module '/app/tests/integration/test_job_tracking_notification_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_job_tracking_notification_integration.py:17: in <module>
    from tests.utils.db_init import get_test_db_session
tests/utils/db_init.py:12: in <module>
    from netraven.web.db import Base, get_db
E   ModuleNotFoundError: No module named 'netraven.web.db'
_________ ERROR collecting tests/integration/test_key_rotation_api.py __________
tests/integration/test_key_rotation_api.py:19: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
_____ ERROR collecting tests/integration/test_key_rotation_integration.py ______
tests/integration/test_key_rotation_integration.py:22: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
____________ ERROR collecting tests/integration/test_performance.py ____________
tests/integration/test_performance.py:24: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
_________ ERROR collecting tests/integration/test_scheduled_job_api.py _________
tests/integration/test_scheduled_job_api.py:14: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
_________ ERROR collecting tests/integration/test_security_features.py _________
tests/integration/test_security_features.py:20: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
_______ ERROR collecting tests/integration/test_system_functionality.py ________
tests/integration/test_system_functionality.py:22: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
___ ERROR collecting tests/integration/test_user_notification_preferences.py ___
tests/integration/test_user_notification_preferences.py:6: in <module>
    from netraven.web.app import app
netraven/web/app.py:13: in <module>
    app.include_router(auth.router)
E   NameError: name 'app' is not defined
=============================== warnings summary ===============================
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267
  /usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:267: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.4/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

../usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:317
  /usr/local/lib/python3.10/site-packages/pydantic/_internal/_config.py:317: UserWarning: Valid config keys have changed in V2:
  * 'orm_mode' has been renamed to 'from_attributes'
    warnings.warn(message, UserWarning)

netraven/core/credential_store.py:29
  /app/netraven/core/credential_store.py:29: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/integration/test_admin_settings_effects.py
ERROR tests/integration/test_api_device_operations.py
ERROR tests/integration/test_backup_storage_integration.py
ERROR tests/integration/test_credential_api.py - NameError: name 'app' is not...
ERROR tests/integration/test_credential_store_integration.py
ERROR tests/integration/test_credential_with_keys.py - NameError: name 'app' ...
ERROR tests/integration/test_job_logs_api.py - NameError: name 'app' is not d...
ERROR tests/integration/test_job_tracking_notification_integration.py
ERROR tests/integration/test_key_rotation_api.py - NameError: name 'app' is n...
ERROR tests/integration/test_key_rotation_integration.py - NameError: name 'a...
ERROR tests/integration/test_performance.py - NameError: name 'app' is not de...
ERROR tests/integration/test_scheduled_job_api.py - NameError: name 'app' is ...
ERROR tests/integration/test_security_features.py - NameError: name 'app' is ...
ERROR tests/integration/test_system_functionality.py - NameError: name 'app' ...
ERROR tests/integration/test_user_notification_preferences.py - NameError: na...
!!!!!!!!!!!!!!!!!!! Interrupted: 15 errors during collection !!!!!!!!!!!!!!!!!!!
======================== 9 warnings, 15 errors in 0.91s ========================
